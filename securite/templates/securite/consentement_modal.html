<!-- securite/templates/securite/consentement_modal.html -->
<div id="consentement-modal" class="modal" style="display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.8); z-index:9999; display:flex; justify-content:center; align-items:center;">
    <div style="background:#1e1e1e; padding:30px; border-radius:8px; max-width:500px;">
        <h3 style="color:#4CAF50; margin-bottom:20px;"><i class="fas fa-camera"></i> Autorisation de capture vidéo</h3>
        <p style="margin-bottom:15px;">Nous avons besoin de votre consentement pour :</p>
        <ul style="margin-bottom:20px; padding-left:20px;">
            <li>Capturer une image temporaire</li>
            <li>Convertir en données vectorielles</li>
            <li>Conserver 7 jours maximum</li>
        </ul>
        
        <div style="display:flex; gap:15px; justify-content:flex-end;">
            <button id="btn-refuser" class="btn" style="background:#f44336;">
                <i class="fas fa-times"></i> Refuser
            </button>
            <button id="btn-accepter" class="btn primary">
                <i class="fas fa-check"></i> J'accepte
            </button>
        </div>
    </div>
</div>

<script>
document.addEventListener('DOMContentLoaded', function() {
    // Vérifie si le consentement existe déjà
    if(!localStorage.getItem('consentement_capture')) {
        const modal = document.getElementById('consentement-modal');
        modal.style.display = 'flex';
        
        document.getElementById('btn-accepter').addEventListener('click', function() {
            localStorage.setItem('consentement_capture', 'true');
            modal.style.display = 'none';
        });
        
        document.getElementById('btn-refuser').addEventListener('click', function() {
            alert('La fonctionnalité de détection est désactivée sans consentement.');
            modal.style.display = 'none';
        });
    }
});
</script>